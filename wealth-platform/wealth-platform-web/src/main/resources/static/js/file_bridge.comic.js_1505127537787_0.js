!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.comic=n():(e.Bridge=e.Bridge||{},e.Bridge.comic=n())}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=7)}([function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r=function(e){var n,t=[];for(n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}},function(e,n,t){"use strict";function r(e){if(window.NEJSBridge)return void e(NEJSBridge);if(o.push(e),!(o.length>1)){document.addEventListener("NEJSBridgeReady",function(){o.forEach(function(e){e(NEJSBridge)}),o=[]},!1);var n=document.createElement("iframe");n.style.display="none",n.src="nejb://nejb_loaded",document.documentElement.appendChild(n),setTimeout(function(){document.documentElement.removeChild(n)},0)}}t.d(n,"a",function(){return a}),t.d(n,"b",function(){return i});var o=[],a=function(e,n,t){r(function(r){r.callHandler(e,n,function(e){void 0!==e&&(e=JSON.parse(e)),t(e)})})},i=function(e,n){r(function(t){t.registerHandler(e,function(e){void 0!==e&&(e=JSON.parse(e)),n(e)})})}},function(e,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"a",function(){return i});var r=t(1),o=t(4),a=!!navigator.userAgent.match(/NEJSBridge\/[\d.]+\b/),i=a?r.a:o.a},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,"a",function(){return d});var o=t(2),a=t(0),i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),c=function(){function e(){r(this,e)}return i(e,[{key:"getLegacyProtocolConfig",value:function(e,n){e}},{key:"getComputedUrl",value:function(e){return/^[\w0-9]+:\/\//.test(e)?e:this.schemaName_+"://"+e}}]),e}();n.b=c;var u=void 0,l=function(e,n,t,r){u=u||new e;var a=u.getLegacyProtocolConfig(n,t)||{};n=a.actionName||n,t=a.data||t;var i=null;if(r)if(i={},"string"==typeof a.callback)i.name=a.callback,i.handler=r;else if(void 0!==a.callback){if(void 0===a.callback.name)throw new Error("callback name must be provided");i.name=a.callback.name,i.handler=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];if("function"==typeof a.callback.handler){var o=a.callback.handler.apply(null,n);r(o)}else r.apply(null,result)}}var c=u.isInApp();if("pageRedirect"===n){var l=u.getComputedUrl(t.path);o.a(l,t.query,i,c)}else{var f=u.getComputedUrl(n);o.a(f,t,i,c)}},f=function(e,n,t,r){if(u=u||new e,"pageRedirect"===n){var i=void 0,c=void 0,l=u.getLegacyProtocolConfig(n,t);l&&(l=l.data,i=l.path||t.path,c=l.query||t.query),i=u.getComputedUrl(i),t={actionUrl:i+"?"+a.a(c)}}o.a(n,t,r)},s=o.b?f:l,d=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];"function"==typeof t&&(r=t,t={}),s(e,n,t,r)}},function(e,n,t){"use strict";function r(e,n){if(!n)return void(window.location.href=e);var t=document.createElement("iframe");t.style.display="none",t.src=e,document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}t.d(n,"a",function(){return c});var o=t(0),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,n){e.split(".").reduce(function(e,t,r,o){return r===o.length-1?e[t]=n:void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},window)},c=function(e,n,t,c){"object"===(void 0===t?"undefined":a(t))&&null!==t&&void 0!==t.name&&i(t.name,function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];"function"==typeof t.handler&&t.handler.apply(null,n),i(t.name,null)}),r(e+"?"+o.a(n),c)}},function(e,n,t){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var t,c,u=r(e),l=1;l<arguments.length;l++){t=Object(arguments[l]);for(var f in t)a.call(t,f)&&(u[f]=t[f]);if(o){c=o(t);for(var s=0;s<c.length;s++)i.call(t,c[s])&&(u[c[s]]=t[c[s]])}}return u}},,function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){v("share",{platform:e,fromnative:n?"true":"false"})}Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"callHandler",function(){return v});var c=t(3),u=t(0),l=t(1),f=(t(2),t(5)),s=t.n(f);t.d(n,"registerHandler",function(){return l.b});var d=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),p=function(){var e=navigator.userAgent;if(!e.match(/(iPhone|iPad)/)&&!e.match(/Android/))return!1;var n=e.match(/\bNeteaseComic\/([.0-9]+)\b/);if(!n)return!1;var t=n[1].split(".");return{mainVersion:parseInt(t[0],10),subVersion:parseInt(t[1],10)}},m=function(){var e=p();return!!e&&(e.mainVersion>2||2===e.mainVersion&&e.subVersion>=4)},y=function(e){var n=m(),t=void 0,r=void 0,o={},a={};switch(e.path){case"topic":t=7,r=9,o.id=e.query.id,a.id=e.query.id;break;case"detail":t=4,r=3,o.id=e.query.id,a.id=e.query.id;break;case"reader":t=5,r=3,o.id=e.query.id,a.id=e.query.id,e.query.sectionId&&(a.sectionId=e.query.sectionId);break;case"bookListSubject":t=22,r=4,o.id=e.query.id,a.id=e.query.id;break;case"topLevelPage":t=3,o.index=e.query.index;break;case"webview":t=1,o.url=e.query.url,e.query.auth&&(o.auth=e.query.auth),e.query.title&&(o.title=e.query.title),a.url=e.query.url}return o.action=t,n?{path:"necomics://manhua.163.com/v1",query:o}:(r&&(a.a=r),a.actionUrl="necomics://manhua.163.com/v1?"+u.a(o),{path:"shareCallback",query:a})},b=function(){window.getShareContent=i},h=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.schemaName_="neteasecomic",e}return a(n,e),d(n,[{key:"isInApp",value:function(){return-1!==navigator.userAgent.indexOf("NeteaseComic")}},{key:"getLegacyProtocolConfig",value:function(e,n){switch(e){case"share":return n=s.a({},this.shareConfig_,n),n=s.a({},{link:n.link,picurl:n.picurl,platform:n.platform,subtitle:n.description,title:n.title,text:n.text||n.description}),void 0===n.fromnative&&(n.fromnative="false"),{actionName:"share/content",data:n,callback:"sendShareResult"};case"setShareConfig":return this.shareConfig_=s.a({},n),b(),{actionName:"share/support"};case"appInstallCheck":return{callback:{name:"notify_app_installed",handler:function(e,n){return{app_type:e,installed:n}}}};case"rechargeContent":return{callback:{name:"notify_pay_result",handler:function(e,n,t){return{client_type:e,pay_type:n,callback_param:t}}}};case"purchaseSuccess":switch(n.type){case"vip":return{actionName:"",data:{vip:"ok",client_refresh:"1"}};case"coin":return{actionName:"",data:{coin:"ok"}}}break;case"refreshVipInfo":return{actionName:"",data:{vip:"ok",client_refresh:"1"}};case"closeCurrentWebview":return{actionName:"rechargeCloseClick"};case"getLoginUserToken":return{actionName:"appLogin",callback:{name:"notify_app_login_success_new",handler:function(e,n){return{token:e,clientInfo:n}}}};case"openVip":return{actionName:"pageRedirect",data:{path:"comic/vip"}};case"pageRedirect":return{data:y(n)}}}}]),n}(c.b),v=function(e,n,t){c.a(h,e,n,t)}}])});
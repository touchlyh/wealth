!function(t){function e(){}function i(t,e){return function(){t.apply(e,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];c(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0!==t._state){t._handled=!0;n._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(s){a(e.promise,s);return}o(e.promise,n)}else(1===t._state?o:a)(e.promise,t._value)})}else t._deferreds.push(e)}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var s=e.then;if(e instanceof n){t._state=3;t._value=e;r(t);return}else if("function"==typeof s){c(i(s,e),t);return}}t._state=1;t._value=e;r(t)}catch(o){a(t,o)}}function a(t,e){t._state=2;t._value=e;r(t)}function r(t){if(2===t._state&&0===t._deferreds.length)n._immediateFn(function(){if(!t._handled)n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)s(t,t._deferreds[e]);t._deferreds=null}function _(t,e,i){this.onFulfilled="function"==typeof t?t:null;this.onRejected="function"==typeof e?e:null;this.promise=i}function c(t,e){var i=!1;try{t(function(t){if(!i){i=!0;o(e,t)}},function(t){if(!i){i=!0;a(e,t)}})}catch(n){if(i)return;i=!0;a(e,n)}}var l=setTimeout;n.prototype["catch"]=function(t){return this.then(null,t)};n.prototype.then=function(t,i){var n=new this.constructor(e);s(this,new _(t,i,n));return n};n.all=function(t){var e=Array.prototype.slice.call(t);return new n(function(t,i){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var r=a.then;if("function"==typeof r){r.call(a,function(t){n(o,t)},i);return}}e[o]=a;if(0===--s)t(e)}catch(_){i(_)}}if(0===e.length)return t([]);for(var s=e.length,o=0;o<e.length;o++)n(o,e[o])})};n.resolve=function(t){if(t&&"object"==typeof t&&t.constructor===n)return t;else return new n(function(e){e(t)})};n.reject=function(t){return new n(function(e,i){i(t)})};n.race=function(t){return new n(function(e,i){for(var n=0,s=t.length;n<s;n++)t[n].then(e,i)})};n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){l(t,0)};n._unhandledRejectionFn=function(t){if("undefined"!=typeof console&&console)console.warn("Possible Unhandled Promise Rejection:",t)};n._setImmediateFn=function(t){n._immediateFn=t};n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t};if("undefined"!=typeof module&&module.exports)module.exports=n;else if(!t.Promise)t.Promise=n}(this);var Zepto=function(){function t(t){return null==t?String(t):V[J.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function o(t){return s(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return t instanceof Array}function r(t){return"number"==typeof t.length}function _(t){return L.call(t,function(t){return null!=t})}function c(t){return t.length>0?k.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(t){return t in P?P[t]:P[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function h(t,e){return"number"==typeof e&&!j[l(t)]?e+"px":e}function u(t){var e,i;if(!N[t]){e=A.createElement(t);A.body.appendChild(e);i=getComputedStyle(e,"").getPropertyValue("display");e.parentNode.removeChild(e);"none"==i&&(i="block");N[t]=i}return N[t]}function f(t){return"children"in t?T.call(t.children):k.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function p(t,e,i){for(w in e)if(i&&(o(e[w])||a(e[w]))){if(o(e[w])&&!o(t[w]))t[w]={};if(a(e[w])&&!a(t[w]))t[w]=[];p(t[w],e[w],i)}else if(e[w]!==x)t[w]=e[w]}function g(t,e){return null==e?k(t):k(t).filter(e)}function m(t,i,n,s){return e(i)?i.call(t,n,s):i}function v(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function $(t,e){var i=t.className,n=i&&i.baseVal!==x;if(e===x)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function y(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:!/^0/.test(t)&&!isNaN(e=Number(t))?e:/^[\[\{]/.test(t)?k.parseJSON(t):t):t}catch(i){return t}}function b(t,e){e(t);for(var i in t.childNodes)b(t.childNodes[i],e)}var x,w,k,I,C,E,S=[],T=S.slice,L=S.filter,A=window.document,N={},P={},j={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,R=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,M=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],U=A.createElement("table"),q=A.createElement("tr"),H={tr:A.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:q,th:q,"*":A.createElement("div")},G=/complete|loaded|interactive/,W=/^[\w-]*$/,V={},J=V.toString,X={},Q=A.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};X.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,o=!s;if(o)(s=Q).appendChild(t);n=~X.qsa(s,e).indexOf(t);o&&Q.removeChild(t);return n};C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})};E=function(t){return L.call(t,function(e,i){return t.indexOf(e)==i})};X.fragment=function(t,e,i){var n,s,a;if(R.test(t))n=k(A.createElement(RegExp.$1));if(!n){if(t.replace)t=t.replace(O,"<$1></$2>");if(e===x)e=D.test(t)&&RegExp.$1;if(!(e in H))e="*";a=H[e];a.innerHTML=""+t;n=k.each(T.call(a.childNodes),function(){a.removeChild(this)})}if(o(i)){s=k(n);k.each(i,function(t,e){if(F.indexOf(t)>-1)s[t](e);else s.attr(t,e)})}return n};X.Z=function(t,e){t=t||[];t.__proto__=k.fn;t.selector=e||"";return t};X.isZ=function(t){return t instanceof X.Z};X.init=function(t,i){var n;if(!t)return X.Z();else if("string"==typeof t){t=t.trim();if("<"==t[0]&&D.test(t))n=X.fragment(t,RegExp.$1,i),t=null;else if(i!==x)return k(i).find(t);else n=X.qsa(A,t)}else if(e(t))return k(A).ready(t);else if(X.isZ(t))return t;else if(a(t))n=_(t);else if(s(t))n=[t],t=null;else if(D.test(t))n=X.fragment(t.trim(),RegExp.$1,i),t=null;else if(i!==x)return k(i).find(t);else n=X.qsa(A,t);return X.Z(n,t)};k=function(t,e){return X.init(t,e)};k.extend=function(t){var e,i=T.call(arguments,1);if("boolean"==typeof t){e=t;t=i.shift()}i.forEach(function(i){p(t,i,e)});return t};X.qsa=function(t,e){var i,s="#"==e[0],o=!s&&"."==e[0],a=s||o?e.slice(1):e,r=W.test(a);return n(t)&&r&&s?(i=t.getElementById(a))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:T.call(r&&!s?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))};k.contains=function(t,e){return t!==e&&t.contains(e)};k.type=t;k.isFunction=e;k.isWindow=i;k.isArray=a;k.isPlainObject=o;k.isEmptyObject=function(t){var e;for(e in t)return!1;return!0};k.inArray=function(t,e,i){return S.indexOf.call(e,t,i)};k.camelCase=C;k.trim=function(t){return null==t?"":String.prototype.trim.call(t)};k.uuid=0;k.support={};k.expr={};k.map=function(t,e){var i,n,s,o=[];if(r(t))for(n=0;n<t.length;n++){i=e(t[n],n);if(null!=i)o.push(i)}else for(s in t){i=e(t[s],s);if(null!=i)o.push(i)}return c(o)};k.each=function(t,e){var i,n;if(r(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t};k.grep=function(t,e){return L.call(t,e)};if(window.JSON)k.parseJSON=JSON.parse;k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){V["[object "+e+"]"]=e.toLowerCase()});k.fn={forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,indexOf:S.indexOf,concat:S.concat,map:function(t){return k(k.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return k(T.apply(this,arguments))},ready:function(t){if(G.test(A.readyState)&&A.body)t(k);else A.addEventListener("DOMContentLoaded",function(){t(k)},!1);return this},get:function(t){return t===x?T.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(null!=this.parentNode)this.parentNode.removeChild(this)})},each:function(t){S.every.call(this,function(e,i){return t.call(e,i,e)!==!1});return this},filter:function(t){if(e(t))return this.not(this.not(t));else return k(L.call(this,function(e){return X.matches(e,t)}))},add:function(t,e){return k(E(this.concat(k(t,e))))},is:function(t){return this.length>0&&X.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==x)this.each(function(e){if(!t.call(this,e))i.push(this)});else{var n="string"==typeof t?this.filter(t):r(t)&&e(t.item)?T.call(t):k(t);this.forEach(function(t){if(n.indexOf(t)<0)i.push(t)})}return k(i)},has:function(t){return this.filter(function(){return s(t)?k.contains(this,t):k(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:k(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:k(t)},find:function(t){var e,i=this;if("object"==typeof t)e=k(t).filter(function(){var t=this;return S.some.call(i,function(e){return k.contains(e,t)})});else if(1==this.length)e=k(X.qsa(this[0],t));else e=this.map(function(){return X.qsa(this,t)});return e},closest:function(t,e){var i=this[0],s=!1;if("object"==typeof t)s=k(t);for(;i&&!(s?s.indexOf(i)>=0:X.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return k(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=k.map(i,function(t){
if((t=t.parentNode)&&!n(t)&&e.indexOf(t)<0){e.push(t);return t}});return g(e,t)},parent:function(t){return g(E(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return T.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return L.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return k.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display"))this.style.display=u(this.nodeName)})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=k(t).get(0),s=n.parentNode||this.length>1;return this.each(function(e){k(this).wrapAll(i?t.call(this,e):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){k(this[0]).before(t=k(t));for(var e;(e=t.children()).length;)t=e.first();k(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=k(this),s=n.contents(),o=i?t.call(this,e):t;s.length?s.wrapAll(o):n.append(o)})},unwrap:function(){this.parent().each(function(){k(this).replaceWith(k(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=k(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return k(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return k(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;k(this).empty().append(m(this,t,e,i))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===x?"":""+t})},attr:function(t,e){var i;return"string"==typeof t&&e===x?0==this.length||1!==this[0].nodeType?x:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:this.each(function(i){if(1===this.nodeType)if(s(t))for(w in t)v(this,w,t[w]);else v(this,t,m(this,e,i,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&v(this,t)})},prop:function(t,e){t=Y[t]||t;return e===x?this[0]&&this[0][t]:this.each(function(i){this[t]=m(this,e,i,this[t])})},data:function(t,e){var i=this.attr("data-"+t.replace(M,"-$1").toLowerCase(),e);return null!==i?y(i):x},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=m(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=k(this),n=m(this,t,e,i.offset()),s=i.offsetParent().offset(),o={top:n.top-s.top,left:n.left-s.left};if("static"==i.css("position"))o.position="relative";i.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0],s=getComputedStyle(n,"");if(!n)return;if("string"==typeof e)return n.style[C(e)]||s.getPropertyValue(e);else if(a(e)){var o={};k.each(a(e)?e:[e],function(t,e){o[e]=n.style[C(e)]||s.getPropertyValue(e)});return o}}var r="";if("string"==t(e))if(!i&&0!==i)this.each(function(){this.style.removeProperty(l(e))});else r=l(e)+":"+h(e,i);else for(w in e)if(!e[w]&&0!==e[w])this.each(function(){this.style.removeProperty(l(w))});else r+=l(w)+":"+h(w,e[w])+";";return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(k(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){if(!t)return!1;else return S.some.call(this,function(t){return this.test($(t))},d(t))},addClass:function(t){if(!t)return this;else return this.each(function(e){I=[];var i=$(this),n=m(this,t,e,i);n.split(/\s+/g).forEach(function(t){if(!k(this).hasClass(t))I.push(t)},this);I.length&&$(this,i+(i?" ":"")+I.join(" "))})},removeClass:function(t){return this.each(function(e){if(t===x)return $(this,"");I=$(this);m(this,t,e,I).split(/\s+/g).forEach(function(t){I=I.replace(d(t)," ")});$(this,I.trim())})},toggleClass:function(t,e){if(!t)return this;else return this.each(function(i){var n=k(this),s=m(this,t,i,$(this));s.split(/\s+/g).forEach(function(t){(e===x?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})})},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];if(t===x)return e?this[0].scrollTop:this[0].pageYOffset;else return this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];if(t===x)return e?this[0].scrollLeft:this[0].pageXOffset;else return this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=B.test(e[0].nodeName)?{top:0,left:0}:e.offset();i.top-=parseFloat(k(t).css("margin-top"))||0;i.left-=parseFloat(k(t).css("margin-left"))||0;n.top+=parseFloat(k(e[0]).css("border-top-width"))||0;n.left+=parseFloat(k(e[0]).css("border-left-width"))||0;return{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!B.test(t.nodeName)&&"static"==k(t).css("position");)t=t.offsetParent;return t})}};k.fn.detach=k.fn.remove;["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});k.fn[t]=function(s){var o,a=this[0];if(s===x)return i(a)?a["inner"+e]:n(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t];else return this.each(function(e){a=k(this);a.css(t,m(this,s,e,a[t]()))})}});z.forEach(function(e,i){var n=i%2;k.fn[e]=function(){var e,s,o=k.map(arguments,function(i){e=t(i);return"object"==e||"array"==e||null==i?i:X.fragment(i)}),a=this.length>1;if(o.length<1)return this;else return this.each(function(t,e){s=n?e:e.parentNode;e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!s)return k(t).remove();b(s.insertBefore(t,e),function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src))window["eval"].call(window,t.innerHTML)})})})};k.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){k(t)[e](this);return this}});X.Z.prototype=k.fn;X.uniq=E;X.deserializeValue=y;k.zepto=X;return k}();window.Zepto=Zepto;void 0===window.$&&(window.$=Zepto);!function(t){function e(t){return t._zid||(t._zid=h++)}function i(t,i,o,a){i=n(i);if(i.ns)var r=s(i.ns);return(g[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||r.test(t.ns))&&(!o||e(t.fn)===e(o))&&(!a||t.sel==a)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!v&&t.e in $||!!e}function a(t){return y[t]||v&&$[t]||t}function r(i,s,r,_,l,h,u){var f=e(i),p=g[f]||(g[f]=[]);s.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(r);var s=n(e);s.fn=r;s.sel=l;if(s.e in y)r=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return s.fn.apply(this,arguments)};s.del=h;var f=h||r;s.proxy=function(t){t=c(t);if(!t.isImmediatePropagationStopped()){t.data=_;var e=f.apply(i,t._args==d?[t]:[t].concat(t._args));if(e===!1)t.preventDefault(),t.stopPropagation();return e}};s.i=p.length;p.push(s);if("addEventListener"in i)i.addEventListener(a(s.e),s.proxy,o(s,u))})}function _(t,n,s,r,_){var c=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,s,r).forEach(function(e){delete g[c][e.i];if("removeEventListener"in t)t.removeEventListener(a(e.e),e.proxy,o(e,_))})})}function c(e,i){if(i||!e.isDefaultPrevented){i||(i=e);t.each(k,function(t,n){var s=i[t];e[t]=function(){this[n]=b;return s&&s.apply(i,arguments)};e[n]=x});if(i.defaultPrevented!==d?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())e.isDefaultPrevented=b}return e}function l(t){var e,i={originalEvent:t};for(e in t)if(!w.test(e)&&t[e]!==d)i[e]=t[e];return c(i,t)}var d,h=(t.zepto.qsa,1),u=Array.prototype.slice,f=t.isFunction,p=function(t){return"string"==typeof t},g={},m={},v="onfocusin"in window,$={focus:"focusin",blur:"focusout"},y={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents";t.event={add:r,remove:_};t.proxy=function(i,n){if(f(i)){var s=function(){return i.apply(n,arguments)};s._zid=e(i);return s}else if(p(n))return t.proxy(i[n],i);else throw new TypeError("expected function")};t.fn.bind=function(t,e,i){return this.on(t,e,i)};t.fn.unbind=function(t,e){return this.off(t,e)};t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var b=function(){return!0},x=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)};t.fn.undelegate=function(t,e,i){return this.off(e,t,i)};t.fn.live=function(e,i){t(document.body).delegate(this.selector,e,i);return this};t.fn.die=function(e,i){t(document.body).undelegate(this.selector,e,i);return this};t.fn.on=function(e,i,n,s,o){var a,c,h=this;if(e&&!p(e)){t.each(e,function(t,e){h.on(t,i,n,e,o)});return h}if(!p(i)&&!f(s)&&s!==!1)s=n,n=i,i=d;if(f(n)||n===!1)s=n,n=d;if(s===!1)s=x;return h.each(function(d,h){if(o)a=function(t){_(h,t.type,s);return s.apply(this,arguments)};if(i)c=function(e){var n,o=t(e.target).closest(i,h).get(0);if(o&&o!==h){n=t.extend(l(e),{currentTarget:o,
liveFired:h});return(a||s).apply(o,[n].concat(u.call(arguments,1)))}};r(h,e,s,n,i,c||a)})};t.fn.off=function(e,i,n){var s=this;if(e&&!p(e)){t.each(e,function(t,e){s.off(t,i,e)});return s}if(!p(i)&&!f(n)&&n!==!1)n=i,i=d;if(n===!1)n=x;return s.each(function(){_(this,e,n,i)})};t.fn.trigger=function(e,i){e=p(e)||t.isPlainObject(e)?t.Event(e):c(e);e._args=i;return this.each(function(){if("dispatchEvent"in this)this.dispatchEvent(e);else t(this).triggerHandler(e,i)})};t.fn.triggerHandler=function(e,n){var s,o;this.each(function(a,r){s=l(p(e)?t.Event(e):e);s._args=n;s.target=r;t.each(i(r,e.type||e),function(t,e){o=e.proxy(s);if(s.isImmediatePropagationStopped())return!1})});return o};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}});["focus","blur"].forEach(function(e){t.fn[e]=function(t){if(t)this.bind(e,t);else this.each(function(){try{this[e]()}catch(t){}});return this}});t.Event=function(t,e){if(!p(t))e=t,t=e.type;var i=document.createEvent(m[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];i.initEvent(t,n,!0);return c(i)}}(Zepto);!function(t){function e(e,i,n){var s=t.Event(i);t(e).trigger(s,n);return!s.isDefaultPrevented()}function i(t,i,n,s){if(t.global)return e(i||v,n,s)}function n(e){if(e.global&&0===t.active++)i(e,null,"ajaxStart")}function s(e){if(e.global&&!--t.active)i(e,null,"ajaxStop")}function o(t,e){var n=e.context;if(e.beforeSend.call(n,t,e)===!1||i(e,n,"ajaxBeforeSend",[t,e])===!1)return!1;i(e,n,"ajaxSend",[t,e])}function a(t,e,n,s){var o=n.context,a="success";n.success.call(o,t,a,e);if(s)s.resolveWith(o,[t,a,e]);i(n,o,"ajaxSuccess",[e,n,t]);_(a,e,n)}function r(t,e,n,s,o){var a=s.context;s.error.call(a,n,e,t);if(o)o.rejectWith(a,[n,e,t]);i(s,a,"ajaxError",[n,s,t||e]);_(e,n,s)}function _(t,e,n){var o=n.context;n.complete.call(o,e,t);i(n,o,"ajaxComplete",[e,n]);s(n)}function c(){}function l(t){if(t)t=t.split(";",2)[0];return t&&(t==w?"html":t==x?"json":y.test(t)?"script":b.test(t)&&"xml")||"text"}function d(t,e){if(""==e)return t;else return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){if(e.processData&&e.data&&"string"!=t.type(e.data))e.data=t.param(e.data,e.traditional);if(e.data&&(!e.type||"GET"==e.type.toUpperCase()))e.url=d(e.url,e.data),e.data=void 0}function u(e,i,n,s){var o=!t.isFunction(i);return{url:e,data:o?i:void 0,success:!o?i:t.isFunction(n)?n:void 0,dataType:o?s||n:n}}function f(e,i,n,s){var o,a=t.isArray(i),r=t.isPlainObject(i);t.each(i,function(i,_){o=t.type(_);if(s)i=n?s:s+"["+(r||"object"==o||"array"==o?i:"")+"]";if(!s&&a)e.add(_.name,_.value);else if("array"==o||!n&&"object"==o)f(e,_,n,i);else e.add(i,_)})}var p,g,m=0,v=window.document,$=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,x="application/json",w="text/html",k=/^\s*$/;t.active=0;t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,s,_=e.jsonpCallback,c=(t.isFunction(_)?_():_)||"jsonp"+ ++m,l=v.createElement("script"),d=window[c],h=function(e){t(l).triggerHandler("error",e||"abort")},u={abort:h};if(i)i.promise(u);t(l).on("load error",function(o,_){clearTimeout(s);t(l).off().remove();if("error"==o.type||!n)r(null,_||"error",u,e,i);else a(n[0],u,e,i);window[c]=d;if(n&&t.isFunction(d))d(n[0]);d=n=void 0});if(o(u,e)===!1){h("abort");return u}window[c]=function(){n=arguments};l.src=e.url.replace(/=\?/,"="+c);v.head.appendChild(l);if(e.timeout>0)s=setTimeout(function(){h("timeout")},e.timeout);return u};t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};t.ajax=function(e){var i=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(p in t.ajaxSettings)if(void 0===i[p])i[p]=t.ajaxSettings[p];n(i);if(!i.crossDomain)i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host;if(!i.url)i.url=window.location.toString();h(i);if(i.cache===!1)i.url=d(i.url,"_="+Date.now());var _=i.dataType,u=/=\?/.test(i.url);if("jsonp"==_||u){if(!u)i.url=d(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?");return t.ajaxJSONP(i,s)}var f,m=i.accepts[_],v={},$=function(t,e){v[t.toLowerCase()]=[t,e]},y=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,b=i.xhr(),x=b.setRequestHeader;if(s)s.promise(b);if(!i.crossDomain)$("X-Requested-With","XMLHttpRequest");$("Accept",m||"*/*");if(m=i.mimeType||m){if(m.indexOf(",")>-1)m=m.split(",",2)[0];b.overrideMimeType&&b.overrideMimeType(m)}if(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())$("Content-Type",i.contentType||"application/x-www-form-urlencoded");if(i.headers)for(g in i.headers)$(g,i.headers[g]);b.setRequestHeader=$;b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=c;clearTimeout(f);var e,n=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==y){_=_||l(i.mimeType||b.getResponseHeader("content-type"));e=b.responseText;try{if("script"==_)(0,eval)(e);else if("xml"==_)e=b.responseXML;else if("json"==_)e=k.test(e)?null:t.parseJSON(e)}catch(o){n=o}if(n)r(n,"parsererror",b,i,s);else a(e,b,i,s)}else r(b.statusText||null,b.status?"error":"abort",b,i,s)}};if(o(b,i)===!1){b.abort();r(null,"abort",b,i,s);return b}if(i.xhrFields)for(g in i.xhrFields)b[g]=i.xhrFields[g];var w="async"in i?i.async:!0;b.open(i.type,i.url,w,i.username,i.password);for(g in v)x.apply(b,v[g]);if(i.timeout>0)f=setTimeout(function(){b.onreadystatechange=c;b.abort();r(null,"timeout",b,i,s)},i.timeout);b.send(i.data?i.data:null);return b};t.get=function(e,i,n,s){return t.ajax(u.apply(null,arguments))};t.post=function(e,i,n,s){var o=u.apply(null,arguments);o.type="POST";return t.ajax(o)};t.getJSON=function(e,i,n){var s=u.apply(null,arguments);s.dataType="json";return t.ajax(s)};t.fn.load=function(e,i,n){if(!this.length)return this;var s,o=this,a=e.split(/\s/),r=u(e,i,n),_=r.success;if(a.length>1)r.url=a[0],s=a[1];r.success=function(e){o.html(s?t("<div>").html(e.replace($,"")).find(s):e);_&&_.apply(o,arguments)};t.ajax(r);return this};var I=encodeURIComponent;t.param=function(t,e){var i=[];i.add=function(t,e){this.push(I(t)+"="+I(e))};f(i,t,e);return i.join("&").replace(/%20/g,"+")}}(Zepto);!function(t){t.fn.serializeArray=function(){var e,i=[];t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var n=e.attr("type");if("fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked))i.push({name:e.attr("name"),value:e.val()})});return i};t.fn.serialize=function(){var t=[];this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))});return t.join("&")};t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i);if(!i.isDefaultPrevented())this.get(0).submit()}return this}}(Zepto);!function(t){if(!("__proto__"in{}))t.extend(t.zepto,{Z:function(e,i){e=e||[];t.extend(e,t.fn);e.selector=i||"";e.__Z=!0;return e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var i=getComputedStyle;window.getComputedStyle=function(t){try{return i(t)}catch(e){return null}}}}(Zepto);I$(102,function(t,e,i,n,s){n._$$Module=t._$klass();s=n._$$Module._$extend(e._$$EventTarget);s.__init=function(t){this.__super(t)};s.__reset=function(t){this.__toast=i._$$Toast._$allocate({parent:document.body});this.__super(t)};s.__destroy=function(){this.__super();this.__toast._$recycle()}},31,32,17);I$(109,'<form method="post" action="" class="login-classic LoginClassic">   <input name="redirect" type="hidden" value="" />   <input name="csrfToken" type="hidden" value="" />   <div class="control-wrap control-wrap--hasIcon">       <i class="icon sprite-reg-phone"></i>     <input type="text" placeholder="手机号" class="ipt u-ipt ipt-block u-ipt-ani js-flag" id="username" name="username">   </div>   <div class="control-wrap control-wrap--hasIcon">       <i class="icon sprite-reg-lock"></i>     <input type="password" id="password" name="password" class="ipt u-ipt ipt-block u-ipt-ani" placeholder="密码">   </div>   <div class="captcha js-flag row"></div>   <p class="err f-dn js-flag"></p>   <div class="row-1 f-cb row">     <a href="/account/resetPassword/step1" class="f-fr js-flag">忘记密码？</a>   </div>   <div class="row">     <button class="u-btn s-btn u-login u-brd u-ot js-flag">登录</button>   </div>   <div class="row-register m-register LoginClassic__resgiter">     <a href="/account/mobileReg/step1" class="mobi-reg small js-flag">手机号注册</a>   </div> </form> ');I$(106,function(t,e,i,n){n._$$CacheLogin=t._$klass();var s=n._$$CacheLogin._$extend(e._$$CacheAbstract);s._$loginUpCheck=function(t){var e="login::upCheck",n=this._$dispatchEvent._$bind(this,"onloginupCheck",{key:e}),s="/login/upCheck.json";if(!this.__doQueueRequest(e,n))i._$request(s,{method:"POST",type:"json",data:t,onload:function(t){this.__setDataInCache(e,t);this.__doCallbackRequest(e)}._$bind(this),onerror:function(t){this.__setDataInCache(e,{errTip:t.message});this.__doCallbackRequest(e)}._$bind(this)})};s._$captchaRequireIf=function(t){var e="login::captchaRequireIf",n=this._$dispatchEvent._$bind(this,"onCaptchaRequireIf",{key:e}),s="/captcha/require_if.json";if(!this.__doQueueRequest(e,n))i._$request(s,{method:"POST",type:"json",data:{account:t,type:1},onload:function(t){this.__setDataInCache(e,{code:200===t.code?0:1});this.__doCallbackRequest(e)}._$bind(this),onerror:function(t){this.__setDataInCache(e,{code:-1,httpcode:t.data});this.__doCallbackRequest(e)}._$bind(this)})};s._$loginStatistic=function(t){
var e="login::statistic",n=this._$dispatchEvent._$bind(this,"onloginStatistic",{key:e}),s="/login/statistic.json";if(!this.__doQueueRequest(e,n))i._$request(s,{method:"POST",type:"json",data:t,onload:function(t){this.__setDataInCache(e,{code:0});this.__doCallbackRequest(e)}._$bind(this),onerror:function(){this.__setDataInCache(e,{code:-1});this.__doCallbackRequest(e)}._$bind(this)})};return n},31,81,14);I$(105,function(t,e,i,n,s,o,a,r,_,c,l,d,h,c,u){var f=function(t){var e=/^0?1\d{10}$/;return e.test(t)},p=function(t){var e={},i=$(t).serializeArray();$.each(i,function(){if(void 0!==e[this.name]){if(!e[this.name].push)e[this.name]=[e[this.name]];e[this.name].push(this.value||"")}else e[this.name]=this.value||""});return e},g={1:"账号或密码错误",2:"系统错误，请稍候重试",3:"系统错误，请稍候重试",4:"尝试登录次数过多，请稍候再试",5:"输入的验证码错误，请重新输入",6:"请输入验证码",7:"手机号未注册",8:"第三方授权失败",9:"帐号或密码错误",10:"大通行证Cookie不合法",101:"手机号已注册",102:"手机号不存在",103:"手机验证码发送次数过多",104:"手机验证码不正确",105:"手机号未注册",107:"发送验证码失败，请稍后再试",663:"帐号格式错误",9999:"未知错误"};u._$$LoginClassic=t._$klass();var m=u._$$LoginClassic._$extend(d._$$EventTarget);m.__initXGui=function(){this.__seed_html=s._$addNodeTemplate(r)};m.__reset=function(t){this.__super(t);this.__form=document.body.getElementsByClassName("LoginClassic")[0];this.__form.style.display="block";var e=n._$getByClassName(this.__form,"js-flag"),i=0;this.__phoneInput=e[i++];this.__captcha=e[i++];this.__error=e[i++];this.__forgetPwdNode=e[i++];this.__submitButton=e[i++];this.__regLink=e[i++];this.__form.csrfToken.value=window.SITE_CONFIG.csrfToken;var s=t.query.redirect?t.query.redirect:"/";this.__form.redirect.value=s;l._$placeholder(this.__phoneInput);l._$placeholder(this.__form.password);var a=location.protocol+"//"+window.SITE_CONFIG.serverName+"/login"+window.SITE_CONFIG.loginInterface;n._$attr(this.__form,"action",a);this.__loginCache=h._$$CacheLogin._$allocate({onloginupCheck:function(t){var e=this.__loginCache.__getDataInCache(t.key);if(200===e.code)location.href=e.redirect;else{this.__showMsgError(e.msg||"未知错误");this.__checkId()}}._$bind(this),onCaptchaRequireIf:function(t){var e=this.__loginCache.__getDataInCache(t.key);if(e.code!==-1){if(0===e.code)this.__showCaptcha();else this.__hideCaptcha();this.__submitButton.disabled=!1}else if(405==e.httpcode&&!c.checkCookieEnabled())this.__showMsgError("请先启用浏览器的cookie功能再操作");else this.__showMsgError("获取验证码出错～_～")}._$bind(this)});this.__doInitDomEvent([[this.__form,"submit",this.__onSubmit._$bind(this)],[this.__form.username,"change",this.__usernameChange._$bind(this)],[this.__captcha,"click",this.__refreshCaptcha._$bind(this)]]);this.__regLink.href+="?redirect="+encodeURIComponent(s);this.__forgetPwdNode+="?targetUrl="+encodeURIComponent(s);if(t.query.errCode)this.__showMsgError(g[t.query.errCode]);var r=o._$cookie("__login.phone");if(r)this.__phoneInput.value=r;this.__errorTip=t.errorTip;this.__checkId()};m.__usernameChange=function(){this.__checkId()};m.__showMsgError=function(t){if("toast"!=this.__errorTip.type){var e=$(this.__error);e.text(t).show()}else this.__errorTip.toast._$toastShow({tipContent:t})};m.__onSubmit=function(t){i._$stopDefault(t);this.__submitButton.disabled=!0;var e=this.__phoneInput.value.trim();if(e!=this.__phoneInput.value)this.__phoneInput.value=e;var n=p(this.__form),s=void 0!==n["checkcode"],o=!0,r=$(this.__error);if(0==n["username"].length)if(0==n["password"].length)this.__showMsgError("请输入手机号和密码～_～");else this.__showMsgError("请输入手机号～_～");else if(!f(n["username"]))this.__showMsgError("喂～手机号是11个数字 (|||ﾟдﾟ)");else if(0==n["password"].length)this.__showMsgError("请输入密码～_～");else if(s&&0==n["checkcode"].length)this.__showMsgError("请输入验证码～_～");else{o=!1;r.text("").hide()}if(!o){n.password=a._$md52hex(n.password);this.__loginCache._$loginUpCheck(n)}else this.__submitButton.disabled=!1};m.__refreshCaptcha=function(t){var e=i._$getElement(t,"t:img");if(e)e.src=this.__genCaptchaImg()};m.__checkId=function(){var t=this.__form.username.value;if(f(t))this.__loginCache._$captchaRequireIf(t)};m.__genCaptchaImg=function(){var t=this.__form.username.value;return"/captcha/captchaImage?account="+t+"&d="+(new Date).getTime()+"&type=1"};m.__showCaptcha=function(){var t=this.__genCaptchaImg(),e='<input type="text" name="checkcode" class="m-checkcode u-ipt ipt u-ipt-ani" placeholder="请输入验证码"><img class="captcha-img" width="70" height="28" src="'+t+'">';this.__captcha.innerHTML=e;n._$delClassName(this.__captcha,"hide")};m.__hideCaptcha=function(){this.__captcha.innerHTML="";n._$addClassName(this.__captcha,"hide")};m.__destroy=function(){this.__super();this.__phoneInput=null;this.__captcha=null;this.__error=null;this.__forgetPwdNode=null;this.__submitButton=null;this.__regLink=null;this.__form.style.display="none";this.__form=null};return u},31,36,5,2,37,54,108,109,43,3,110,32,106,13);I$(107,".g-bd {     border-radius: 0;     width: 270px; }  .m-cnt .statusTxt .u-success {     margin-top: 0; }  .ScapTcha div.statusTxt {     width: 20px; }  .m-cnt .inputbox {     width: 238px; }  .m-cnt .slidebox {     width: 240px; }  .m-header {     display: none; }  .m-cnt {     padding: 0; }  input {     width: 168px;     font-size: 14px;     font-weight: normal; }  .fur-change-email, .loginbox, .unlockbox, .m-cnt .m-unlogin, .m-cnt #login-form .u-label {     width: 240px; }  .m-cnt .m-unlogin .b-unlogn {     width: auto;     padding-right: 8px; }  .m-cnt .m-nerror .ferrorhead, .m-cnt .m-nerror .ferrorhead2 {     width: 222px; }  .loginbox {     margin-top: 20px; }  .m-cnt #login-form .m-sug {     width: 238px;     left: -31px;     top: 38px; }  .m-cnt #login-form .m-sug .itm {     padding-left: 30px; }  .m-cnt #login-form .m-ckcnt .u-label, .m-cnt #login-form .m-ckcnt input.cktext, .m-cnt #login-form .m-mb .u-label {     width: 58px; }  .m-cnt .ckin {     width: 106px; }  .m-cnt .inputbox {     border-color: #ccc;     border-radius: 3px;     height: 38px; }  .m-cnt .u-input input {     height: 38px;     line-height: 38px;     vertical-align: top; }  .m-cnt .inputbox.active {     border-color: #ccc; }  .u-input.box input {     padding-left: 0; }  .m-cnt .u-logo {     padding: 0 5px 0 4px; }  .fur-change-email {     height: 10px;     line-height: 10px; }  .m-cnt .u-logo div {     margin-top: 7px; }  .m-cnt .ckimg {     height: 38px; }  .m-cnt .u-success {     margin-top: 9px; }  .m-cnt .m-ckcnt .ckimgbox {     width: 118px;     margin-right: 30px; }  .u-loginbtn {     background-color: #fac21b;     border-radius: 3px;     height: 38px;     line-height: 38px; }  .u-loginbtn.btndisabled {     opacity: 0.4; }  .u-loginbtn.btndisabled:active {     color: #fff; }  .sprite-reg-lock, .sprite-reg-phone, .sprite-reg-mail, .sprite-reg-face, .m-cnt .u-logo div {     background-image: url('https://yuedust.yuedu.126.net/comic_static/h5/images/sprites/reg.png');     background-repeat: no-repeat; }  .sprite-reg-lock, .m-cnt .u-logo .u-logo-img2 {     background-position: 0 0;     width: 24px;     height: 24px; }  .sprite-reg-phone {     background-position: -24px 0;     width: 19px;     height: 22px; }  .sprite-reg-mail {     background-position: -43px 0;     width: 22px;     height: 20px; }  .sprite-reg-face, .m-cnt .u-logo .u-logo-img1 {     background-position: 0 -24px;     width: 19px;     height: 22px; }  .m-cnt .m-pc {     display: inline-block;     width: 120px; }  .m-cnt .pcbtn {     margin-left: 10px; }  .m-cnt .pcbtn a {     display: block;     width: 110px;     height: 40px;     text-align: center;     color: #fff;     font-size: 12px;     background: #9ec5e3;     line-height: 40px; }  .m-cnt .m-pc .pcin{     width: 70px; }  @media screen and (-webkit-min-device-pixel-ratio: 1.0), screen and (min--moz-device-pixel-ratio: 1.0), screen and (min-device-pixel-ratio: 1.0), screen and (min-resolution: 1.0dppx) {     .sprite-reg-lock,     .sprite-reg-phone,     .sprite-reg-mail,     .sprite-reg-face,     .m-cnt .u-logo div {         background-image: url('https://yuedust.yuedu.126.net/comic_static/h5/images/sprites/reg.png');         background-size: 66px 46px;     } }  @media screen and (-webkit-min-device-pixel-ratio: 2.0), screen and (min--moz-device-pixel-ratio: 2.0), screen and (min-device-pixel-ratio: 2.0), screen and (min-resolution: 2.0dppx) {     .sprite-reg-lock,     .sprite-reg-phone,     .sprite-reg-mail,     .sprite-reg-face,     .m-cnt .u-logo div {         background-image: url('https://yuedust.yuedu.126.net/comic_static/h5/images/sprites/reg@2x.png');         background-size: 66px 46px;     } } ");I$(103,function(t,e,i,n,s,o,a,r,_,c){function l(t){function e(){n.onload=n.onerror=null;clearTimeout(s);if(window.URS){d[t][0]();d[t]=0}else{d[t][1]();d[t]=void 0}}if(0===d[t])return Promise.resolve();if(d[t])return d[t][2];var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript";n.charset="utf-8";n.async=!0;n.timeout=12e4;n.onload=n.onerror=e;n.src=t;var s=setTimeout(e,12e4),o=new Promise(function(e,i){d[t]=[e,i]});d[2]=o;i.appendChild(n);return o}var d={};c._$$Login=t._$klass();var h=c._$$Login._$extend(e._$$EventTarget);h.__reset=function(t){this.__super(t);var e=t.defaultOption||"urs";this.__includeBox=s._$get(t.includeBox);this.__query=t.query||{};this.__logincb=t.logincb;this.__errorTip=t.errorTip;var i=this.__query.redirect?this.__query.redirect:"/",n=window.SITE_CONFIG.baseUrl+"/login?redirect="+encodeURIComponent(i);if(t.fromLayer)n+="&from=layer";this.__redirectUrl=n;this._$toggleLoginType(e)};h._$getActiveLoginType=function(){return this.__activeLoginType};h._$toggleLoginType=function(t){if(!t)t="urs"===this.__activeLoginType?"phone":"urs";if(t!==this.__activeLoginType&&!this.__modLoading){var e,i=s._$id(this.__includeBox);if("urs"===t){if(this.__loginClassic)this.__loginClassic._$recycle();this._$ensureUrsComponent(i)}else{e=this.__urs;if(e){e.closeIframe();e.includeBox.getElementsByTagName("iframe")[0].style.display="none"}this.__loginClassic=a._$$LoginClassic._$allocate({parent:i,query:this.__query,errorTip:this.__errorTip})}this.__activeLoginType=t;
}};h._$logincbHandler=function(t){if(!this.__logincb){var e;if(this.__query.redirect)e=this.__query.redirect;else if("/login"===location.pathname)e="/";if(e)location.href=e;else location.reload()}else this.__logincb(t)};h._$ensureUrsComponent=function(t){if("undefined"==typeof window.URS)l("//urswebzj.nosdn.127.net/webzj_cdn101/message.js").then(function(){this._$renderUrs(t)}._$bind(this),function(){alert("登录组件载入失败，请重试")});else this._$renderUrs(t)};h._$renderUrs=function(t){s._$addClassName(t,"state-loading");var e=this;this.__modLoading=!0;if(!this.__urs){var n="http://reg.163.com/reg/mobile/innerDomainReg.do?",o="http://global.163.com/urs/redirect.html?target="+encodeURIComponent(this.__redirectUrl),a={product:"manhua",loginurl:o,url:o};n+=i._$object2query(a);window._$needUrsBgp=1;var c={newCDN:1,isHttps:1,version:3,product:"manhua",promark:"gnMksMZ",host:"manhua.163.com",productKey:"5d4d91e10f2f61565a61f499b1549d77",swidth:238,needUrsBgp:1,mode:"float",customStyles:{imagePanel:{align:"bottom",borderRadius:"8px"},controlBar:{height:"40px",borderRadius:"3px"},gap:"5px"},capPadding:10,capBarHeight:30,includeBox:t,page:"login",single:1,placeholder:{account:"网易邮箱",pwd:"密码"},needUnLogin:1,needanimation:1,defaultUnLogin:1,unLoginText:"自动登录",style:_,initReady:function(){s._$delClassName(this.includeBox,"state-loading");e.__modLoading=!1;this.includeBox.getElementsByTagName("iframe")[0].style.display="block"},frameSize:{width:270,height:227},forgetpwdlink:"http://reg.163.com/getpasswd/RetakePassword.jsp",regUrl:n,terms:[{name:"《服务条款》",url:"http://reg.163.com/agreement.shtml"}]},l=new URS(c);l.logincb=function(t){this.__loginCache=r._$$CacheLogin._$allocate({onloginStatistic:function(e){this._$logincbHandler({username:t,code:"0"})}.bind(this)});this.__loginCache._$loginStatistic({userName:t})}._$bind(this);l.regcb=function(t){};this.__urs=l}else this.__urs.prepareIframe()};return c},31,32,3,5,2,40,105,106,107);I$(104,function(t,e,i,n,s,o){s._$$Module=t._$klass();o=s._$$Module._$extend(e._$$Module);o.__init=function(t){this.__super(t)};o.__reset=function(t){this.__super(t);var e=document.body.getElementsByClassName("js-phoneSwitcher");this.__phoneSwitcher=e[0];this.__doInitDomEvent([[this.__phoneSwitcher,"click",this.__switchLoginMethod.bind(this)]]);this.__loginInstance=n._$$Login._$allocate({defaultOption:"phone",includeBox:"login-area",query:{redirect:window.PG_CONFIG.targetUrl},errorTip:{type:"toast",toast:this.__toast}})};var a="<span class=\"sprite-sns-{if type == 'phone'}phone{else}mail{/if} icon\"></span><div class=\"plainText LoginMethod__plainText\">{if type == 'phone'}手机{else}邮箱{/if}</div>",r=i._$add(a);o.__switchLoginMethod=function(){this.__loginInstance._$toggleLoginType();var t=this.__loginInstance._$getActiveLoginType(),e="phone"===t?"mail":"phone";this.__phoneSwitcher.innerHTML=i._$get(r,{type:e})};o.__destroy=function(){this.__super();this.__phoneSwitcher=null;this.__phoneSwitcherIcon=null};s._$$Module._$allocate({})},31,102,40,103);